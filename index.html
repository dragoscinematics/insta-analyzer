<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Instagram Follower Analyzer – See Who Doesn’t Follow You Back</title>
  <meta name="description"
        content="Upload your Instagram data ZIP and instantly discover who doesn’t follow you back, who you don’t follow, and your mutuals—all for free and in seconds.">
  <link rel="canonical" href="https://whofollowsme.com/"/>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PVWHZ1JWVR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-PVWHZ1JWVR', {
      page_path: window.location.pathname,
    });
  </script>

  <!-- Google AdSense -->
  <script async
          src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5094319627936586"
          crossorigin="anonymous"></script>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>
  <!-- JSZip -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

  <style>
    @keyframes pop { 0%,100%{transform:scale(1)}50%{transform:scale(1.1)} }
    .pop-anim { animation: pop .2s ease-out forwards; }
  </style>
</head>
<body class="flex flex-col h-full">

  <!-- HEADER -->
  <header class="bg-gradient-to-r from-pink-500 to-yellow-400 text-white p-6 shadow-md flex items-center justify-center">
    <i data-feather="bar-chart-2" class="w-8 h-8 mr-2"></i>
    <h1 class="text-2xl font-bold">Instagram Follower Analyzer</h1>
  </header>

  <!-- MAIN CARD -->
  <main class="flex-1 flex items-center justify-center p-6">
    <div id="card" class="w-full max-w-3xl bg-white rounded-2xl shadow-xl overflow-hidden">

      <!-- STATS RIBBON -->
      <div class="grid grid-cols-3 bg-gray-100 text-center">
        <div class="p-4 border-r">
          <div id="totalFollowers" class="text-lg font-semibold">0</div>
          <div class="text-xs text-gray-500">Followers</div>
        </div>
        <div class="p-4 border-r">
          <div id="totalFollowing" class="text-lg font-semibold">0</div>
          <div class="text-xs text-gray-500">Following</div>
        </div>
        <div class="p-4">
          <div id="ratio" class="text-lg font-semibold">0.00</div>
          <div class="text-xs text-gray-500">Ratio</div>
        </div>
      </div>

      <!-- TABS -->
      <div class="border-b">
        <nav class="-mb-px flex">
          <button data-tab="onlyYou"
                  class="tab-btn flex-1 py-4 text-center font-medium text-gray-600 border-b-2 border-transparent hover:text-gray-800 hover:border-gray-300">
            They Don’t Follow You
          </button>
          <button data-tab="onlyThey"
                  class="tab-btn flex-1 py-4 text-center font-medium text-gray-600 border-b-2 border-transparent hover:text-gray-800 hover:border-gray-300">
            You Don’t Follow Back
          </button>
          <button data-tab="mutuals"
                  class="tab-btn flex-1 py-4 text-center font-medium text-gray-600 border-b-2 border-transparent hover:text-gray-800 hover:border-gray-300">
            Mutuals
          </button>
        </nav>
      </div>

      <!-- TAB CONTENTS -->
      <div class="p-6 space-y-6">

        <!-- DROPZONE -->
        <div id="dropzone"
             class="relative border-2 border-dashed border-gray-300 rounded-lg p-12 text-center hover:border-indigo-400 transition-colors cursor-pointer">
          <p class="text-gray-500 mb-4">Drag &amp; drop your ZIP here</p>
          <button id="zipLabel"
                  class="bg-indigo-500 text-white px-6 py-2 rounded-full font-semibold hover:bg-indigo-600 transition-colors">
            Browse ZIP
          </button>
          <input type="file" accept=".zip" id="zipInput"
                 class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"/>
        </div>

        <!-- FILTER -->
        <input id="filter"
               placeholder="Search usernames…"
               class="w-full border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-400"/>

        <!-- PANEL: They Don’t Follow You -->
        <div id="onlyYou" class="tab-content space-y-2">
          <button id="showAllOnlyYou" class="hidden mb-2 text-sm text-indigo-600">
            Show All
          </button>
          <ul id="listOnlyYou" class="max-h-64 overflow-y-auto space-y-1"></ul>
        </div>

        <!-- PANEL: You Don’t Follow Back -->
        <div id="onlyThey" class="tab-content hidden space-y-2">
          <ul id="listOnlyThey" class="max-h-64 overflow-y-auto space-y-1"></ul>
        </div>

        <!-- PANEL: Mutuals -->
        <div id="mutuals" class="tab-content hidden space-y-2">
          <ul id="listMutuals" class="max-h-64 overflow-y-auto space-y-1"></ul>
        </div>

      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="bg-gray-100 text-gray-500 text-sm text-center p-4">
    Made with ❤️ by You
  </footer>

  <!-- SCRIPT -->
  <script>
    feather.replace();

    // Element refs
    const zipInput       = document.getElementById('zipInput'),
          zipLabel       = document.getElementById('zipLabel'),
          dropzone       = document.getElementById('dropzone'),
          filterInput    = document.getElementById('filter'),
          listOnlyYou    = document.getElementById('listOnlyYou'),
          listOnlyThey   = document.getElementById('listOnlyThey'),
          listMutuals    = document.getElementById('listMutuals'),
          totalF         = document.getElementById('totalFollowers'),
          totalG         = document.getElementById('totalFollowing'),
          ratioEl        = document.getElementById('ratio'),
          showAllYouBtn  = document.getElementById('showAllOnlyYou');

    // Store originals
    let origOnlyYou = [];

    // — Tabs logic —
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn')
          .forEach(b => b.classList.remove('text-indigo-600','border-indigo-600'));
        btn.classList.add('text-indigo-600','border-indigo-600');
        document.querySelectorAll('.tab-content')
          .forEach(c => c.classList.add('hidden'));
        document.getElementById(btn.dataset.tab)
          .classList.remove('hidden');
        filterInput.dispatchEvent(new Event('input'));
      });
    });
    document.querySelector('.tab-btn').click();

    // — Drag & Drop styling —
    ['dragenter','dragover'].forEach(e =>
      dropzone.addEventListener(e, ev => { ev.preventDefault(); dropzone.classList.add('border-indigo-400'); })
    );
    ['dragleave','drop'].forEach(e =>
      dropzone.addEventListener(e, ev => { ev.preventDefault(); dropzone.classList.remove('border-indigo-400'); })
    );
    dropzone.addEventListener('drop', ev => {
      if (ev.dataTransfer.files[0]) zipInput.files = ev.dataTransfer.files;
      zipInput.dispatchEvent(new Event('change'));
    });

    // — Render "They Don’t Follow You" (removable) —
    function renderRemovable(arr, ul, showAllBtn) {
      ul.innerHTML = '';
      if (!arr.length) {
        ul.innerHTML = '<li class="text-gray-400 italic">None</li>';
        showAllBtn.classList.add('hidden');
        return;
      }
      arr.forEach(u => {
        const url = `https://instagram.com/${u}`;
        const li = document.createElement('li');
        li.className = 'p-3 bg-gray-50 rounded hover:bg-indigo-50 transition flex items-center cursor-pointer';
        li.textContent = u;
        li.addEventListener('click', () => {
          window.open(url, '_blank');
          li.remove();
          if (ul.children.length < arr.length) {
            showAllBtn.classList.remove('hidden');
          }
        });
        ul.appendChild(li);
      });
      showAllBtn.classList.add('hidden');
    }

    // — Render static lists (open only) —
    function renderStatic(arr, ul) {
      ul.innerHTML = '';
      if (!arr.length) {
        ul.innerHTML = '<li class="text-gray-400 italic">None</li>';
        return;
      }
      arr.forEach(u => {
        const url = `https://instagram.com/${u}`;
        const li = document.createElement('li');
        li.className = 'p-3 bg-gray-50 rounded hover:bg-indigo-50 transition flex items-center cursor-pointer';
        li.textContent = u;
        li.addEventListener('click', () => {
          window.open(url, '_blank');
        });
        ul.appendChild(li);
      });
    }

    // — Show All handler —
    showAllYouBtn.addEventListener('click', () => {
      renderRemovable(origOnlyYou, listOnlyYou, showAllYouBtn);
      filterInput.dispatchEvent(new Event('input'));
    });

    // — Filter all lists —
    filterInput.addEventListener('input', () => {
      const term = filterInput.value.toLowerCase();
      [listOnlyYou, listOnlyThey, listMutuals].forEach(ul => {
        ul.querySelectorAll('li').forEach(li => {
          li.style.display = li.textContent.toLowerCase().includes(term) ? '' : 'none';
        });
      });
    });

    // — ZIP processing —
    zipInput.addEventListener('change', async () => {
      const file = zipInput.files[0];
      if (!file || !file.name.endsWith('.zip')) {
        return alert('Please select a valid Instagram ZIP.');
      }
      dropzone.classList.add('opacity-50');
      zipLabel.classList.add('pop-anim');
      try {
        const zip = await JSZip.loadAsync(file);
        const f1  = await zip.file('connections/followers_and_following/followers_1.html').async('string');
        const f2  = await zip.file('connections/followers_and_following/following.html').async('string');
        const parser = new DOMParser();
        const extract = html => Array.from(
          parser.parseFromString(html,'text/html').querySelectorAll('a')
        ).map(a => a.textContent.trim()).filter(Boolean);

        const followers = new Set(extract(f1)),
              following = new Set(extract(f2)),
              onlyYou   = [...following].filter(u => !followers.has(u)),
              onlyThey  = [...followers].filter(u => !following.has(u)),
              mutuals   = [...followers].filter(u => following.has(u));

        // store original for removable list
        origOnlyYou = onlyYou.slice();

        // render panels
        renderRemovable(origOnlyYou, listOnlyYou, showAllYouBtn);
        renderStatic(onlyThey,         listOnlyThey);
        renderStatic(mutuals,          listMutuals);

        // update stats
        totalF.textContent = followers.size;
        totalG.textContent = following.size;
        ratioEl.textContent = (followers.size / following.size).toFixed(2);

      } catch (err) {
        console.error(err);
        alert('Error reading that ZIP.');
      } finally {
        dropzone.classList.remove('opacity-50');
      }
    });

    // — Cleanup animation —
    zipLabel.addEventListener('animationend', () => {
      zipLabel.classList.remove('pop-anim');
    });
  </script>
</body>
</html>
